## 数据库



### 关系型和非关系型数据库的区别（各自优点）



### 常用SQL语句（DDL,DML,DCL,TCL）



### 数据库中join的类型与区别（inner join, outer join, cross join, natural join, self join），注意适用场景和sql语句的编写



### 数据库的索引类型

InnoDB存储引擎支持三种类型的索引：B+树索引、哈希索引、全文索引。



### 聚集索引和非聚集索引的区别

聚集索引按照每张表的主键构建一课B+树，同时在叶子节点中存放的数据就是整张表的行记录数据，索引的叶子节点就是数据页。每张表只有一个聚集索引。

非聚集索引和聚集索引的区别在于，非聚集索引的叶子节点除了保存索引键值以外，同时叶子结点的索引行中保存了对应索引行的主键。在查找的过程中，如果需要获得找到的索引行的其他字段，需要利用已经保存的主键执行回表操作。

### 唯一性索引和主码索引的区别



### 索引的优缺点，什么时候使用索引，什么时候不能使用索引

索引的优点：

1. 大大减少了扫描数据库的数据量。
2. 避免排序和生成临时表。
3. 将随机I/O变成顺序I/O。

当使用索引带来的好处超过了使用索引带来的额外工作时，使用索引是有好处的。例如，当一个表很小时，使用索引未必有使用全表扫描高效；如果一个表是一个中到大型的表，那么使用索引就很高效；如果一个表是个特大型的表，那么建立索引的的额外工作会很高，一般会采用分表的方式。

### 索引的底层实现（B+树，为何不采用红黑树，B树）



### B树和B+树具体实现



### 索引最左匹配原则

使用联合索引的时候，查询语句必须从索引的最左列开始匹配。如果没有从最左边开始匹配，就不能使用这个联合索引。同时，如果查询语句在索引的某个列上执行了范围查找，这个列右边的列都不能使用索引。

### 数据库引擎介绍，Innodb和Myisam的特点与区别



### 数据库中事务的ACID特性（四大特性都要能够举例说明，理解透彻，比如原子性和一致性的关联，隔离性不好会出现的问题）



### 数据库隔离性设置不同会出现的问题

* 脏读：不同的事务下，当前事务可以读到其他事务没有提交的数据。
* 不可重复读：一个事务内多次读取同一个范围的数据，在当前事务还没有结束时，另一个事务也访问了同一段数据集合，并做了一些DML操作。第一个事务的两次查询会有不一致的情况。
* 幻读：一个事务在前后两次查询同一个范围的时候，后一次查询看到了前一次查询没有看到的行。这种问题在当前读情况下才会出现。
* 丢失更新：一个事务的更新会导致另一个事务的更新被覆盖，造成不一致的现象。这种情况主要出现在基于数据库的应用编写过程中。

### 事务的隔离级别

在关系型数据库中，事务的隔离级别分为以下四种：读未提交、读提交、可重复读、串荇化。

* 读未提交：在这个隔离级别下，一个事务的修改，即使没有被提交，也能被其他的事务看到。
* 读提交：在这个隔离级别下，所有事务只能看到已提交事务做的修改。可以解决脏读问题。**Oracle的默认隔离级别是读提交**。
* 可重复读：在这个隔离级别下，保证了在一个事务中多次读取同样的记录结果是一直的。可以解决脏读和不可重复读问题。**MySQL的默认隔离级别是可重复读**。在InnoDB存储引擎中，通过MVCC机制可以解决该隔离级别下的幻读问题。
* 串行化：在这个隔离级别下，事务强制串行执行，保证了一致性。可以解决所有的问题。由于会给事务读取的每一行加锁，可能会导致大量的锁争用。

### MVCC

MVCC实现了非阻塞的读操作，在很多情况下避免了加锁操作。MVCC为每一个事务保存了一个Read View，根据这个Read View，不同的事务对于同一个表会看到不同版本的数据。

InnoDB存储引擎通过undo log保存每一行的多个版本记录，每个undo log都带有事务ID，事务ID是递增的。在Read View中，保存了当前活跃的（启动了但是还没有提交）事务ID，数组里面事务ID的最小值记为低水位，当前系统里面已经创建过的事务ID的最大值加 1 记为高水位。

在执行非锁定读过程中，根据以下原则判断一条记录是否可读：

1. 如果记录的事务id小于低水位，那么这个事务已经提交，可以读取。
2. 如果记录的事务id大于高水位，那么这个事务在生成Read View时还没有开始运行，不能读取。
3. 否则，根据活跃事务ID数组判断。如果事务ID不在活跃数组中，说明已经提交，可以读取记录；否则，事务还在运行，不能读取记录。

读提交隔离级别的Read View在查询语句启动前生成。可重复读的Read View在事务启动前生成。

### 事务的实现

事务通过重做日志实现。重做日志分为redo log和undo log。

**redo log**



**undo log**

undo log用于MVCC的实现以及

### Mysql的表空间方式，各自特点



### 数据库的范式

* **第一范式(确保每列保持原子性)**：第一范式是最基本的范式。如果数据库表中的所有字段值都是不可分解的原子值，就说明该数据库表满足了第一范式。

* **第二范式(确保表中的每列都和主键相关)**：在满足第一范式的前提下，（主要针对联合主键而言）第二范式需要确保数据库表中的每一列都和主键的所有成员直接相关，由整个主键才能唯一确定，而不能只与主键的某一部分相关或者不相关。 

* **第三范式(确保非主键的列没有传递依赖)**：在满足第二范式的前提下，第三范式需要确保数据表中的每一列数据都和主键直接相关，而不能间接相关。非主键的列不能确定其他列，列与列之间不能出现传递依赖。

* **BCNF范式（确保主键之间没有传递依赖**：主键有可能是由多个属性组合成的复合主键，那么多个主键之间不能有传递依赖。也就是复合主键之间谁也不能决定谁，相互之间没有关系。

### 数据的锁的种类，加锁的方式



### 乐观锁和悲观锁





### 视图的作用与使用方法（如何删除等）